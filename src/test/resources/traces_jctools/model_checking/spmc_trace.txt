| ----------------------------------- |
|       Thread 1       |   Thread 2   |
| ----------------------------------- |
| offer(3): true       |              |
| offer(3): true       |              |
| peek(): 3            |              |
| offer(3): true       |              |
| poll(): 3            |              |
| ----------------------------------- |
| offer(4): true [0,5] | poll(): 3    |
| offer(2): true [1,5] | peek(): 3    |
| peek(): 4 [2,5]      | peek(): 3    |
| offer(3): true [3,5] | poll(): 3    |
| peek(): 4 [4,5]      | peek(): null |
| ----------------------------------- |
| offer(4): true       |              |
| peek(): 4            |              |
| peek(): 4            |              |
| peek(): 4            |              |
| offer(5): false      |              |
| ----------------------------------- |





| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                      Thread 1                                                                      |                                                                      Thread 2                                                                      |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| offer(3): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(3): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 0 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 0 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 16): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[0].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| offer(3): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(3): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 1 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 1 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 20): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[1].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| peek(): 3                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.peek(): 3 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 0 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 0 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 0 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 0 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     lvProducerIndex(): 2 at SpmcArrayQueue.peek(SpmcArrayQueue.java:293)                                                                           |                                                                                                                                                    |
|       producerIndex ➜ 2 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     svProducerIndexCache(2) at SpmcArrayQueue.peek(SpmcArrayQueue.java:301)                                                                        |                                                                                                                                                    |
|       producerIndexCache = 2 at SpmcArrayQueueProducerIndexCacheField.svProducerIndexCache(SpmcArrayQueue.java:168)                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 16): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |                                                                                                                                                    |
|       Array<Object>#1[0].getObjectVolatile(): 3 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 0 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 0 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: 3                                                                                                                                        |                                                                                                                                                    |
| offer(3): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(3): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 2 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 2 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 24): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[2].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| poll(): 3                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.poll(SpmcArrayQueueTest.kt:19)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.poll(): 3 at SpmcArrayQueueTest.poll(SpmcArrayQueueTest.kt:19)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 2 at SpmcArrayQueue.poll(SpmcArrayQueue.java:245)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 2 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 0 at SpmcArrayQueue.poll(SpmcArrayQueue.java:248)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 0 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     casConsumerIndex(0, 1): true at SpmcArrayQueue.poll(SpmcArrayQueue.java:263)                                                                   |                                                                                                                                                    |
|       Unsafe#1.compareAndSwapLong(SpmcArrayQueue#1, 416, 0, 1): true at SpmcArrayQueueConsumerIndexField.casConsumerIndex(SpmcArrayQueue.java:120) |                                                                                                                                                    |
|     removeElement(Array<Object>#1, 0, 3): 3 at SpmcArrayQueue.poll(SpmcArrayQueue.java:266)                                                        |                                                                                                                                                    |
|       UnsafeRefArrayAccess.lpRefElement(Array<Object>#1, 16): 3 at SpmcArrayQueue.removeElement(SpmcArrayQueue.java:273)                           |                                                                                                                                                    |
|         Array<Object>#1[0].getObject(): 3 at UnsafeRefArrayAccess.lpRefElement(UnsafeRefArrayAccess.java:76)                                       |                                                                                                                                                    |
|   result: 3                                                                                                                                        |                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                                                                                                                    | poll(): 3                                                                                                                                          |
|                                                                                                                                                    |   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.poll(SpmcArrayQueueTest.kt:19)                                                                    |
|                                                                                                                                                    |   SpmcArrayQueue#1.poll(): 3 at SpmcArrayQueueTest.poll(SpmcArrayQueueTest.kt:19)                                                                  |
|                                                                                                                                                    |     lvProducerIndexCache(): 2 at SpmcArrayQueue.poll(SpmcArrayQueue.java:245)                                                                      |
|                                                                                                                                                    |       producerIndexCache ➜ 2 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |
|                                                                                                                                                    |     lvConsumerIndex(): 1 at SpmcArrayQueue.poll(SpmcArrayQueue.java:248)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 1 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |     casConsumerIndex(1, 2): true at SpmcArrayQueue.poll(SpmcArrayQueue.java:263)                                                                   |
|                                                                                                                                                    |       Unsafe#1.compareAndSwapLong(SpmcArrayQueue#1, 416, 1, 2): true at SpmcArrayQueueConsumerIndexField.casConsumerIndex(SpmcArrayQueue.java:120) |
|                                                                                                                                                    |     removeElement(Array<Object>#1, 1, 3): 3 at SpmcArrayQueue.poll(SpmcArrayQueue.java:266)                                                        |
|                                                                                                                                                    |       UnsafeRefArrayAccess.lpRefElement(Array<Object>#1, 20): 3 at SpmcArrayQueue.removeElement(SpmcArrayQueue.java:273)                           |
|                                                                                                                                                    |         Array<Object>#1[1].getObject(): 3 at UnsafeRefArrayAccess.lpRefElement(UnsafeRefArrayAccess.java:76)                                       |
|                                                                                                                                                    |   result: 3                                                                                                                                        |
|                                                                                                                                                    | peek(): 3                                                                                                                                          |
|                                                                                                                                                    |   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |
|                                                                                                                                                    |   SpmcArrayQueue#1.peek(): 3 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |
|                                                                                                                                                    |     lvProducerIndexCache(): 2 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |
|                                                                                                                                                    |       producerIndexCache ➜ 2 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |
|                                                                                                                                                    |     lvConsumerIndex(): 2 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 2 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |     lvProducerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:293)                                                                           |
|                                                                                                                                                    |       producerIndex ➜ 3 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |
|                                                                                                                                                    |     svProducerIndexCache(3) at SpmcArrayQueue.peek(SpmcArrayQueue.java:301)                                                                        |
|                                                                                                                                                    |       producerIndexCache = 3 at SpmcArrayQueueProducerIndexCacheField.svProducerIndexCache(SpmcArrayQueue.java:168)                                |
|                                                                                                                                                    |     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 24): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |
|                                                                                                                                                    |       Array<Object>#1[2].getObjectVolatile(): 3 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |
|                                                                                                                                                    |     lvConsumerIndex(): 2 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 2 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |   result: 3                                                                                                                                        |
|                                                                                                                                                    | peek(): 3                                                                                                                                          |
|                                                                                                                                                    |   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |
|                                                                                                                                                    |   SpmcArrayQueue#1.peek(): 3 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |
|                                                                                                                                                    |     lvProducerIndexCache(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |
|                                                                                                                                                    |       producerIndexCache ➜ 3 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |
|                                                                                                                                                    |     lvConsumerIndex(): 2 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 2 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 24): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |
|                                                                                                                                                    |       Array<Object>#1[2].getObjectVolatile(): 3 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |
|                                                                                                                                                    |     lvConsumerIndex(): 2 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 2 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |   result: 3                                                                                                                                        |
|                                                                                                                                                    | poll(): 3                                                                                                                                          |
|                                                                                                                                                    |   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.poll(SpmcArrayQueueTest.kt:19)                                                                    |
|                                                                                                                                                    |   SpmcArrayQueue#1.poll(): 3 at SpmcArrayQueueTest.poll(SpmcArrayQueueTest.kt:19)                                                                  |
|                                                                                                                                                    |     lvProducerIndexCache(): 3 at SpmcArrayQueue.poll(SpmcArrayQueue.java:245)                                                                      |
|                                                                                                                                                    |       producerIndexCache ➜ 3 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |
|                                                                                                                                                    |     lvConsumerIndex(): 2 at SpmcArrayQueue.poll(SpmcArrayQueue.java:248)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 2 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |     casConsumerIndex(2, 3): true at SpmcArrayQueue.poll(SpmcArrayQueue.java:263)                                                                   |
|                                                                                                                                                    |       Unsafe#1.compareAndSwapLong(SpmcArrayQueue#1, 416, 2, 3): true at SpmcArrayQueueConsumerIndexField.casConsumerIndex(SpmcArrayQueue.java:120) |
|                                                                                                                                                    |     removeElement(Array<Object>#1, 2, 3): 3 at SpmcArrayQueue.poll(SpmcArrayQueue.java:266)                                                        |
|                                                                                                                                                    |       UnsafeRefArrayAccess.lpRefElement(Array<Object>#1, 24): 3 at SpmcArrayQueue.removeElement(SpmcArrayQueue.java:273)                           |
|                                                                                                                                                    |         Array<Object>#1[2].getObject(): 3 at UnsafeRefArrayAccess.lpRefElement(UnsafeRefArrayAccess.java:76)                                       |
|                                                                                                                                                    |   result: 3                                                                                                                                        |
|                                                                                                                                                    | peek(): null                                                                                                                                       |
|                                                                                                                                                    |   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |
|                                                                                                                                                    |   SpmcArrayQueue#1.peek(): null at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                               |
|                                                                                                                                                    |     lvProducerIndexCache(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |
|                                                                                                                                                    |       producerIndexCache ➜ 3 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |
|                                                                                                                                                    |     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |
|                                                                                                                                                    |       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |
|                                                                                                                                                    |     lvProducerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:293)                                                                           |
|                                                                                                                                                    |       producerIndex ➜ 3 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |
|                                                                                                                                                    |   result: null                                                                                                                                     |
| offer(4): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(4): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 3 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 3 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| offer(2): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(2): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 4 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 4 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 16): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[0].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| peek(): 4                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.peek(): 4 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 3 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     lvProducerIndex(): 5 at SpmcArrayQueue.peek(SpmcArrayQueue.java:293)                                                                           |                                                                                                                                                    |
|       producerIndex ➜ 5 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     svProducerIndexCache(5) at SpmcArrayQueue.peek(SpmcArrayQueue.java:301)                                                                        |                                                                                                                                                    |
|       producerIndexCache = 5 at SpmcArrayQueueProducerIndexCacheField.svProducerIndexCache(SpmcArrayQueue.java:168)                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): 4 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): 4 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: 4                                                                                                                                        |                                                                                                                                                    |
| offer(3): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(3): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 5 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 5 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 20): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[1].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| peek(): 4                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.peek(): 4 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 5 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 5 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): 4 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): 4 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: 4                                                                                                                                        |                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| offer(4): true                                                                                                                                     |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(4): true at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                            |                                                                                                                                                    |
|     lvProducerIndex(): 6 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 6 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 24): null at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                  |                                                                                                                                                    |
|       Array<Object>#1[2].getObjectVolatile(): null at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                              |                                                                                                                                                    |
|   result: true                                                                                                                                     |                                                                                                                                                    |
| peek(): 4                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.peek(): 4 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 5 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 5 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): 4 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): 4 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: 4                                                                                                                                        |                                                                                                                                                    |
| peek(): 4                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.peek(): 4 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 5 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 5 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): 4 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): 4 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: 4                                                                                                                                        |                                                                                                                                                    |
| peek(): 4                                                                                                                                          |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                    |                                                                                                                                                    |
|   SpmcArrayQueue#1.peek(): 4 at SpmcArrayQueueTest.peek(SpmcArrayQueueTest.kt:16)                                                                  |                                                                                                                                                    |
|     lvProducerIndexCache(): 5 at SpmcArrayQueue.peek(SpmcArrayQueue.java:284)                                                                      |                                                                                                                                                    |
|       producerIndexCache ➜ 5 at SpmcArrayQueueProducerIndexCacheField.lvProducerIndexCache(SpmcArrayQueue.java:163)                                |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:286)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): 4 at SpmcArrayQueue.peek(SpmcArrayQueue.java:304)                                      |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): 4 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.peek(SpmcArrayQueue.java:306)                                                                           |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: 4                                                                                                                                        |                                                                                                                                                    |
| offer(5): false                                                                                                                                    |                                                                                                                                                    |
|   queue ➜ SpmcArrayQueue#1 at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                                   |                                                                                                                                                    |
|   SpmcArrayQueue#1.offer(5): false at SpmcArrayQueueTest.offer(SpmcArrayQueueTest.kt:13)                                                           |                                                                                                                                                    |
|     lvProducerIndex(): 7 at SpmcArrayQueue.offer(SpmcArrayQueue.java:214)                                                                          |                                                                                                                                                    |
|       producerIndex ➜ 7 at SpmcArrayQueueProducerIndexField.lvProducerIndex(SpmcArrayQueue.java:60)                                                |                                                                                                                                                    |
|     UnsafeRefArrayAccess.lvRefElement(Array<Object>#1, 28): 4 at SpmcArrayQueue.offer(SpmcArrayQueue.java:216)                                     |                                                                                                                                                    |
|       Array<Object>#1[3].getObjectVolatile(): 4 at UnsafeRefArrayAccess.lvRefElement(UnsafeRefArrayAccess.java:89)                                 |                                                                                                                                                    |
|     lvConsumerIndex(): 3 at SpmcArrayQueue.offer(SpmcArrayQueue.java:218)                                                                          |                                                                                                                                                    |
|       consumerIndex ➜ 3 at SpmcArrayQueueConsumerIndexField.lvConsumerIndex(SpmcArrayQueue.java:115)                                               |                                                                                                                                                    |
|   result: false                                                                                                                                    |                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
